import { useEffect, useState } from "react";

const ThemeChangeButton = () => {
  const [theme, setTheme] = useState(localStorage.theme);

  useEffect(() => {
    localStorage.theme = theme;
  }, [theme]);

  useEffect(() => {
    if (
      localStorage.theme === "dark" ||
      (!("theme" in localStorage) &&
        window.matchMedia("(prefers-color-scheme: dark)").matches)
    ) {
      document.documentElement.classList.add("dark");
      localStorage.theme = "dark";
    } else {
      document.documentElement.classList.remove("dark");
      localStorage.theme = "light";
    }
  }, [theme]);

  return (
    <div
      className="relative w-[70px] h-9 bg-white rounded-full border border-babyPeach-200 cursor-pointer"
      onClick={() => setTheme(theme === "dark" ? "light" : "dark")}
    >
      <div
        className={`absolute h-full w-[35px] rounded-full ${
          theme === "dark" ? "bg-[#263238] left-0" : "bg-[#FFEBEB] right-0"
        } flexCenter`}
      >
        {theme == "dark" ? (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
          >
            <g clipPath="url(#clip0_471_2842)">
              <path
                d="M6.20202 1.14477C6.28829 1.2496 6.34115 1.3779 6.35375 1.51308C6.36635 1.64827 6.33813 1.78412 6.27272 1.9031C5.76174 2.84127 5.49489 3.89288 5.49671 4.96118C5.49671 8.51509 8.39394 11.3929 11.9646 11.3929C12.4304 11.3929 12.8838 11.3443 13.3196 11.2515C13.4531 11.2225 13.5923 11.2336 13.7196 11.2833C13.8469 11.3329 13.9568 11.419 14.0355 11.5308C14.1185 11.6469 14.1609 11.7873 14.1559 11.93C14.151 12.0728 14.099 12.2099 14.0081 12.32C13.3149 13.1715 12.4404 13.8576 11.4483 14.3283C10.4563 14.7989 9.37174 15.0422 8.27373 15.0405C4.19924 15.0405 0.898987 11.7579 0.898987 7.71345C0.898987 4.66951 2.76742 2.05865 5.42777 0.952089C5.5603 0.896082 5.70741 0.884587 5.84702 0.91933C5.98663 0.954074 6.1112 1.03318 6.20202 1.14477ZM5.19267 2.05777C4.16972 2.60648 3.31455 3.4221 2.71804 4.41794C2.12153 5.41378 1.80598 6.55263 1.80492 7.71345C1.80492 11.2665 4.70303 14.1443 8.27373 14.1443C9.1288 14.1457 9.97567 13.9776 10.7653 13.6496C11.555 13.3216 12.2717 12.8403 12.8741 12.2334C12.5763 12.2705 12.2731 12.2891 11.9646 12.2891C7.89015 12.2891 4.59078 9.00651 4.59078 4.96206C4.59078 3.93062 4.80467 2.94868 5.19267 2.05777Z"
                fill="white"
              />
              <path
                d="M10.4392 3.68133C10.4519 3.64305 10.4763 3.60975 10.509 3.58614C10.5417 3.56253 10.5809 3.54983 10.6213 3.54983C10.6616 3.54983 10.7009 3.56253 10.7336 3.58614C10.7662 3.60975 10.7907 3.64305 10.8033 3.68133L11.1454 4.70835C11.2983 5.16618 11.6571 5.52502 12.115 5.67792L13.142 6.01997C13.1802 6.03264 13.2136 6.05705 13.2372 6.08974C13.2608 6.12242 13.2735 6.16172 13.2735 6.20204C13.2735 6.24236 13.2608 6.28165 13.2372 6.31433C13.2136 6.34702 13.1802 6.37143 13.142 6.38411L12.115 6.72615C11.8892 6.80138 11.684 6.92817 11.5157 7.09646C11.3474 7.26475 11.2206 7.46992 11.1454 7.69572L10.8033 8.72274C10.7907 8.76102 10.7662 8.79433 10.7336 8.81793C10.7009 8.84154 10.6616 8.85425 10.6213 8.85425C10.5809 8.85425 10.5417 8.84154 10.509 8.81793C10.4763 8.79433 10.4519 8.76102 10.4392 8.72274L10.0971 7.69572C10.0219 7.46992 9.89514 7.26475 9.72684 7.09646C9.55855 6.92817 9.35338 6.80138 9.12758 6.72615L8.10056 6.38411C8.06228 6.37143 8.02898 6.34702 8.00537 6.31433C7.98176 6.28165 7.96906 6.24236 7.96906 6.20204C7.96906 6.16172 7.98176 6.12242 8.00537 6.08974C8.02898 6.05705 8.06228 6.03264 8.10056 6.01997L9.12758 5.67792C9.35338 5.60269 9.55855 5.47591 9.72684 5.30761C9.89514 5.13932 10.0219 4.93415 10.0971 4.70835L10.4392 3.68133ZM13.1517 0.986506C13.1604 0.96134 13.1768 0.939518 13.1985 0.924073C13.2202 0.908629 13.2461 0.90033 13.2728 0.90033C13.2994 0.90033 13.3254 0.908629 13.3471 0.924073C13.3688 0.939518 13.3851 0.96134 13.3939 0.986506L13.6219 1.6706C13.7235 1.97641 13.9631 2.21593 14.2689 2.31757L14.953 2.5456C14.9781 2.55432 14.9999 2.57067 15.0154 2.59237C15.0308 2.61407 15.0391 2.64005 15.0391 2.66668C15.0391 2.69332 15.0308 2.71929 15.0154 2.74099C14.9999 2.76269 14.9781 2.77904 14.953 2.78777L14.2689 3.0158C14.1182 3.06593 13.9812 3.15051 13.8689 3.26282C13.7566 3.37512 13.672 3.51206 13.6219 3.66277L13.3939 4.34686C13.3851 4.37203 13.3688 4.39385 13.3471 4.40929C13.3254 4.42474 13.2994 4.43304 13.2728 4.43304C13.2461 4.43304 13.2202 4.42474 13.1985 4.40929C13.1768 4.39385 13.1604 4.37203 13.1517 4.34686L12.9237 3.66277C12.8735 3.51206 12.789 3.37512 12.6766 3.26282C12.5643 3.15051 12.4274 3.06593 12.2767 3.0158L11.5926 2.78777C11.5674 2.77904 11.5456 2.76269 11.5302 2.74099C11.5147 2.71929 11.5064 2.69332 11.5064 2.66668C11.5064 2.64005 11.5147 2.61407 11.5302 2.59237C11.5456 2.57067 11.5674 2.55432 11.5926 2.5456L12.2767 2.31757C12.5825 2.21593 12.822 1.97641 12.9237 1.6706L13.1517 0.98739V0.986506Z"
                fill="white"
              />
            </g>
            <defs>
              <clipPath id="clip0_471_2842">
                <rect
                  width="14.1414"
                  height="14.1414"
                  fill="white"
                  transform="translate(0.898987 0.898987)"
                />
              </clipPath>
            </defs>
          </svg>
        ) : (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="17"
            height="16"
            viewBox="0 0 17 16"
            fill="none"
          >
            <g clipPath="url(#clip0_471_10200)">
              <path
                d="M5.07332 5.29C3.89328 6.80666 3.91394 9.50093 5.4221 10.8365C7.13443 12.352 9.54432 12.3362 11.0598 10.9423C12.8766 9.27003 12.7721 6.48705 11.1655 4.91083C9.5504 3.32611 6.66411 3.24347 5.07332 5.29Z"
                fill="#FCC11A"
              />
              <path
                d="M6.96789 4.76987C6.50123 4.56327 5.99081 5.12594 5.76841 5.50997C5.54602 5.89522 5.33942 6.6499 5.81338 6.84313C6.28734 7.03515 6.62762 6.70945 6.96911 6.14678C7.30817 5.5841 7.5014 5.00685 6.96789 4.76987Z"
                fill="#FEE269"
              />
              <path
                d="M8.18298 2.65529C8.06996 2.86675 8.10764 3.0296 8.33246 3.08307C8.55729 3.13654 9.95607 3.3638 10.074 3.37109C10.2453 3.38203 10.3085 3.25321 10.2878 3.10373C10.266 2.95425 9.92448 0.860328 9.89288 0.668314C9.86128 0.4763 9.65833 0.284287 9.4651 0.54071C9.27187 0.797134 8.26805 2.49609 8.18298 2.65529ZM11.8045 4.10877C11.5845 4.17682 11.5906 4.31172 11.7085 4.48307C11.8264 4.65443 12.6382 5.89279 12.7123 5.97908C12.7877 6.06415 12.9153 6.08602 13.0222 5.9572C13.1292 5.8296 14.4635 3.95807 14.5608 3.8414C14.7212 3.64939 14.6252 3.44644 14.3797 3.50963C14.1925 3.55946 11.9431 4.06623 11.8045 4.10877ZM13.4816 7.70963C13.3236 7.6197 13.1182 7.64522 13.0648 7.84818C13.0113 8.05113 12.7767 9.52526 12.7549 9.65408C12.733 9.7829 12.8302 9.9105 12.9894 9.8789C13.1486 9.84731 15.3531 9.5204 15.5002 9.48394C15.7566 9.41953 15.8417 9.16311 15.5755 8.97109C15.4029 8.84592 13.6311 7.7947 13.4816 7.70963ZM11.7182 11.2023C11.8884 11.1112 12.0391 11.1805 12.0816 11.3737C12.1241 11.5657 12.5944 13.532 12.6698 13.8954C12.7075 14.0777 12.4984 14.2272 12.3283 14.1202C12.1569 14.0133 10.3 12.719 10.1809 12.6133C10.0095 12.4638 10.1286 12.3082 10.2125 12.2293C10.3826 12.0676 11.5578 11.2886 11.7182 11.2023ZM6.54722 12.2815C6.33211 12.2608 6.26892 12.4529 6.30173 12.623C6.33333 12.7944 6.65416 14.9612 6.67604 15.1228C6.70763 15.3574 6.95434 15.4546 7.11354 15.2188C7.27274 14.9831 8.37135 13.2258 8.46007 13.0605C8.62048 12.7615 8.5026 12.6971 8.34218 12.623C8.18298 12.5489 6.77205 12.3034 6.54722 12.2815ZM3.47135 9.79262C3.62083 9.54713 3.81284 9.61154 3.9526 9.84609C4.04739 10.0065 4.84948 11.0857 4.92482 11.2023C5.00017 11.3202 5.03177 11.5438 4.79722 11.5973C4.56024 11.652 2.64861 12.1539 2.34965 12.2074C2.05069 12.2608 1.87934 12.0263 2.07135 11.7699C2.18316 11.6192 3.38628 9.93238 3.47135 9.79262ZM3.06545 7.93324C3.33889 8.05477 3.46771 8.01102 3.52482 7.81536C3.60017 7.55894 3.82378 6.38377 3.83472 6.1164C3.84201 5.94262 3.77031 5.77491 3.50295 5.81745C3.23559 5.85998 1.31302 6.12856 1.06753 6.21363C0.781941 6.31328 0.802601 6.62682 0.992184 6.72647C1.21701 6.84436 2.87222 7.84818 3.06545 7.93324ZM6.38802 3.44644C6.54236 3.3237 6.49496 3.14748 6.35642 3.05147C6.21788 2.95547 4.50191 1.71467 4.28437 1.54453C4.09236 1.39505 3.85659 1.44852 3.921 1.79002C3.96718 2.0355 4.51406 4.18411 4.55173 4.33238C4.59427 4.50373 4.72309 4.5888 4.87257 4.48186C5.01961 4.37613 6.2276 3.57526 6.38802 3.44644Z"
                fill="#FFA722"
              />
            </g>
            <defs>
              <clipPath id="clip0_471_10200">
                <rect
                  width="15.5556"
                  height="15.5556"
                  fill="white"
                  transform="translate(0.526855 0.191925)"
                />
              </clipPath>
            </defs>
          </svg>
        )}
      </div>
    </div>
  );
};

export default ThemeChangeButton;
